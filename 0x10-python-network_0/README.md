# 0x10. Python - Network #0

## Concepts
#### The WEB
Internet (or the Web) is a massive distributed client/server information system. Many applications are running concurrently over the Web (such as browsing/surfing, e-mail, file transfer, audio & video streaming ..). In order for proper communication to take place between the client and server these applications must agree on a specific application-level protocol such as HTTP, FTP, SMTP, POP, etc.

**HyperText Transfer Protocol (HTTP)**
Quoting from RFC2616: "HTTP is an application-level protocol for distributed, collaborative, hypermedia information system on the Internet (or the Web)
* HTTP is an asymmetric request-response client-server protocol
* HTTP is a stateless protocol (ie. the current request does not know what has been done in the previous requests).
* HTTP permits negotiating of data type and representation, so as to allow systems to be built independently of data  being transferred.

**Browser**
Whenever you issue a URL from your browser to get a web resource using HTTP, the browser turns the URL into a request message and sends it to the _HTTP server_. The server interprets the request message, and returns the appropriate response message, which is either the resource you requested or an error messaeg.

Uniform Resource Locator (URL)<br/>
A URL is used to uniquely identify a resource over the web.<br/>
Url syntax: ``_protocol://hostname:port/path-and-file-name_``

The browser translates the URL into a request message according to the specified protocol; and sends the request message to the server.<br/>
When the request reaches the server, the server takes either of these actions:
* The server interprets the request received, maps the request into a file under the server's document directory, and returns the file reqquested to the client.
* The server interprets the request received, maps the request into a program kept in the server, executes the program, and return s the output of the program to the client.
* The request cannot be satisfied, the server returns an error message.<br/>
In its idling state, an HTTP server does nothing but listening to the IP address(es) and port(s) specified in the configuration for incoming request.

HTTP typically runs over a TCP/IP connection (HTTP needs not run on TCP/IP. it only presumes a reliable transport. Any transport protocols that provide such guarantees can be used.)<br/>
TCP/IP is a set of _transport and network-layer_ protocols (as in OSI model) for machines to communicate with each other over the network.<br/>
IP (Internet Protocol) deals with network addressing and routing.
TCP (Transmission Control Protocol) is responsible for establishing a connection between two machines. TCP consists of 2 protocols: TCP and UDP (User Datagram Package).

**Apache HTTP Server or Apache Tomcat Server**
A HTTP server (such as Apache HTTP Server or Apache Tomcat Server) is needed to study the HTTP protocol.<br/>
Apache HTTP server is a popular industrial-strength production server and is an open-source software foundation (ie., it is free, with source code).

**HTTP Request Methods**
A client can use one of these request methods to send a request message to an HTTP server. The method are:
* GET: used to get a web resource from the server.
* HEAD: to get the header that a GET request would obtained. Since the header contains the last-modified date of the data, this can be used to check against the local cache copy.
* POST: used to post data up to the web server
* PUT: ask the server to store the data
* DELETE: ask the server to delete the data
* TRACE: ask the server to return a diagnostic trace of the actions it takes
* OPTIONS: ask the server to return the list of request methods it supports.
* CONNECT: used to tell a proxy to make a connection to another host and simply the content, without attempting to parse or cache it. This is often used to make SSL connection through the proxy.

**Response Status Code**
The first line of the response message contains the response status code, which is generated by the server to indicate the outcome of the request.<br/>
The status code is a 3-digit number:
* 1xx (Informational): Request received, server is continuing the process
* 2xx (Success): The request was successfully received, understood, accepted and serviced.
* 3xx (Redirection): Further action must be taken in order to complete the request
* 4xx (Client Error): The request contains bad syntax or cannot be understood.
* 5xx (Server Error): The server failed to fulfill an apparently valid request.

**Conditional GET Requests**
You may use additional request header to issue a "conditional request". For example to ask for the document based on the last-modified date (so as to decide whether to use the local cache copy), or to ask for a portion of the document (or range) instead of the entire document (useful for downloading large documents).<br/>
The conditional request headers include:
* If-Modified-Since (check for response status code "304 Not Modified")
* If-Unmodified-Since
* If-match
* If-None-Match
* If-Range

Uniform Resource Identifier (URI)
is more general than URL, which can even locate a fragment within a resource
The URI syntax for HTTP protocol is: ``http://host:port/part?request-parameters#nameAnchor``
* the request parameters, in the form of name=value pairs are separated from the URL by '?'. The name=value pairs are separated by a '&'
* The #nameAnchor identifies a fragment within the HTML document, defined via the anchor tag <a name="anchorName">...</a>.
* URL rewriting for session management, ex. "...;sessionID=xxxxxx".

#### Using HTTP cookies
An HTTP cookie (web cookie, browser cookie) is a small piece of data that a server sends to a user's web browser. The browser may store the cookie and send it back to the same server with later requests. Typically, an HTTP cookie is used to tell if two requests come from the same browser - keeping a user logged in as it remembers stateful information for the stateless HTTP protocol.

Cookies are mainly used for three purposes:
* Session management (ie. Logins, shopping carts, games scores, or anything else the server should remember)
* Personalization (ie. User preferences, themes, and other settings)
* Tracking (ie. Recording and analyzing user behavior)

Cookies were once used for general client-side storage. While this made sense when they were the only way to store data on the client, modern storage APIs are now recommended. Cookies are sent with every request, so they can worsen performance (especially for mobile data connections). Modern APIs for client storage are the Web Storage API (localStorage and sessionStorage) and IndexedDB.

#### CURL
curl is a tool to transfer data from or to a server using one of the suported protocols (check the list). The command is degigned to work without user interaction.
